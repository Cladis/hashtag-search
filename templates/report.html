<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <title>Wikipedia edits by hashtag</title>
  <meta name="description" content="">
  <meta name="author" content="">

  <link rel="stylesheet" href="/hashtags/static/css/normalize.css">
  <link rel="stylesheet" href="/hashtags/static/css/skeleton.css">

  <script type="text/javascript" src="/hashtags/static/js/jquery.js"></script> 
  <script type="text/javascript" src="/hashtags/static/js/history.min.js"></script> 
  <script type="text/javascript" src="/hashtags/static/js/jquery.tablesorter.min.js"></script> 

  <style>
  .mainspace-only-label {
    float: right;
  }
  .page-header {
    color: #404040;
    background: #f8f8f8;
    margin: 0 0 1em 0;
    border-bottom: 1px solid #d8e6ec;
  }
  .page-header p, .page-header a {
    color: #999;
  }
  .page-header a:hover {
    color: #1EAEDB;
  }
  .page-header h1 a {
    color: #404040;
    text-decoration: none;
  }
  .info {
    border: 1px solid #E1E1E1;
    border-radius: 4px;
    padding: 1.5rem 2rem;
    margin: 0 0.2rem;
  }
  .info p {
    margin: 0.1em 0;
    font-size: 1em;

    color: #9E9E9E;
  }
  .results {
    text-align: center;
    font-size: 90%;
    font-style: italic;
  }
  .page-footer {
    text-align: center;
    font-size: 85%;
    color: #999;
  }
  th.headerSortUp { 
    background: no-repeat right url(images/desc.gif); 
    background-color: #f5f5f5; 
  } 
  th.headerSortDown { 
    background: no-repeat right url(images/asc.gif); 
    background-color: #f5f5f5; 
  } 
  h2 {
    font-size: 2rem;
  }
  form {
    margin-bottom: 0;
  }
  </style>

  <script>
  $(function() {
    $('#rc-table').tablesorter(); 
    $('#tag-search').submit(function(e) {
      var lang = $('#lang').val();
      if (lang) {
        lang = '?lang=' + lang;
      }
      var tag = $('#search').val();
      // TODO: remove starting #
      window.location.href = '/hashtags/search/' + tag + lang;
      e.preventDefault();
    });
  });
  </script>

</head>
<body>
  <div class="section page-header">
    <div class="container">
      <div class="row">
	<div class="full column" style="margin-top: 5%">
          <h1><a href="/hashtags">Wikipedia social search</a></h1>
	  <p>Search for <a href="http://blog.hatnote.com/post/112756032432/the-humble-hashtag-now-on-wikipedia">hashtags</a> in Wikipedia edit summaries</p>
	</div>
      </div>
    </div>
  </div>
  <div class="container">
    <form id="tag-search">
      <div class="row">
	<div class="seven columns">
          <input class="u-full-width" type="search" placeholder="Enter a hashtag or @mention" id="search" value="{tag}">
	</div>
	<div class="two columns">
          <select class="u-full-width" id="lang">
	    <option value="" selected="selected">All</option>
	    {#langs}
	    <option value="{.}">{.}</option>
	    {/langs}
	  </select>
	</div>
	<div class="three columns">
	  <input class="button-primary" type="submit" value="Submit">
	</div>
      </div>
    </form>
    <div class="row">
      <div class="full width">
	<div class="info">
	  <div class="row">
	    <div class="two-thirds column">
	      <h2>{?tag}#{tag}{:else}All tags{/tag}</h2>
	      <p>{stats.oldest} - {stats.newest}</p>
	    </div>
	    <div class="one-third column">
	      <p>{stats.revisions} revisions on {stats.pages} pages</p>
	      <p>{stats.users} users</p>
	      <p>{stats.bytes} bytes changed</p>
	      <p>{stats.langs} language{@gt key=stats.langs value=1}s{/gt}</p>
	    </div>
	  </div>
	</div>
        <table class="u-full-width tablesorter" id="rc-table">
          <thead>
            <tr>
              <th>User</th>
              <th>Page</th>
	      <th>Language</th>
              <th>Tags</th>
              <th>Summary</th>
              <th>Size</th>
              <th>Time</th>
            </tr>
          </thead>
          <tbody>
          {#revisions}
            <tr>
              <td><a href="{rc_user_url}">{rc_user_text}</a></td>
              <td><a href="{diff_url}">{spaced_title}</a></td>
	      <td>{htrc_lang}</td>
              <td>{#tags}{.}{@sep}, {/sep}{/tags}</td>
              <td>{rc_comment|s}</td>
              <td>{diff_size}</td>
              <td>{date}</td>
            </tr>
          {/revisions}
          </tbody>
        </table>
      </div>
      <div class="row results">
	<p>{page.start} - {page.end} of {stats.revisions} results</p>
      </div>
      <div class="row">
	<div class="one-half column">
	  {@gte key=page.prev value=0}
	  <a href="/hashtags/search/{?tag}{tag}{:else}all{/tag}/{page.prev}{?lang}?lang={lang}{/lang}" class="u-full-width button">< previous</a>
          {:else}
	  &nbsp;
	  {/gte}
	</div>
	<div class="one-half column">
	  {@gt key=page.next value=0}
	  <a href="/hashtags/search/{?tag}{tag}{:else}all{/tag}/{page.next}{?lang}?lang={lang}{/lang}" class="u-full-width button">next > </a>
	  {:else}
	  &nbsp;
	  {/gt}
	</div>
	<a href="/hashtags" class="u-full-width button">Home</a>
      </div>
    </div>
  </div>
<div class="section page-footer">
  <div class="container">
    <div class="row">
      <div class="full width">
	<p><a href="http://blog.hatnote.com/post/112756032432/the-humble-hashtag-now-on-wikipedia">Learn more</a>. Built by <a href="https://twitter.com/sklaporte">Stephen LaPorte</a> and <a href="https://twitter.com/mhashemi">Mahmoud Hashemi</a>. Our source code is <a href="https://github.com/hatnote/hashtag-search">available on github</a>.
      </div>
    </div>
  </div>
</div>
</body>
</html>
